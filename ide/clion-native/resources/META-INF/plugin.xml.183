<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="/META-INF/KonanCommonPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>

  <id>org.jetbrains.kotlin.native.clion</id>
  <name>Kotlin/Native for CLion</name>
  <!--version_placeholder-->
  <vendor>JetBrains</vendor>

  <!--idea_version_placeholder-->

  <description>Plugin for Kotlin/Native support in CLion</description>

  <change-notes/>

  <depends>com.intellij.modules.clion</depends>
  <!--java_plugin_dependency-->

  <application-components>
    <component>
      <interface-class>com.jetbrains.konan.KonanIconProvider</interface-class>
      <implementation-class>org.jetbrains.konan.CLionNativeIconProvider</implementation-class>
    </component>
  </application-components>

  <extensions defaultExtensionNs="org.jetbrains.kotlin.native">
    <gradleLauncherProvider implementation="org.jetbrains.konan.gradle.execution.CLionGradleKonanLauncherProvider"/>
  </extensions>
  <extensions defaultExtensionNs="com.intellij">
    <directoryProjectGenerator implementation="org.jetbrains.konan.KonanGradleProjectGenerator"/>
    <projectTaskRunner implementation="org.jetbrains.konan.gradle.execution.GradleKonanProjectTaskRunner"/>

    <configurationType implementation="org.jetbrains.konan.gradle.execution.GradleKonanAppRunConfigurationType"/>
    <runConfigurationProducer implementation="org.jetbrains.konan.gradle.execution.GradleKonanTargetRunConfigurationProducer"/>
    <executionTargetProvider implementation="org.jetbrains.konan.gradle.execution.GradleKonanExecutionTargetProvider"/>
    <runLineMarkerContributor language="ObjectiveC"
                              implementationClass="org.jetbrains.konan.gradle.execution.GradleKonanTargetRunLineMarkerProvider"/>

    <stepsBeforeRunProvider implementation="org.jetbrains.konan.gradle.execution.GradleKonanBuildBeforeRunTaskProvider"/>
  </extensions>

  <actions>
    <action id="Konan.BuildConfiguration" class="org.jetbrains.konan.gradle.execution.KonanBuildConfigurationAction" icon="AllIcons.Actions.Compile" use-shortcut-of="CompileDirty">
      <add-to-group group-id="ToolbarRunGroup" relative-to-action="RunConfiguration" anchor="before"/>
      <add-to-group group-id="TouchBarDefault" relative-to-action="RunConfiguration" anchor="before"/>
      <add-to-group group-id="BuildMenu" relative-to-action="Build" anchor="before"/>
    </action>
    <action id="Konan.BuildProject" class="org.jetbrains.konan.gradle.execution.KonanBuildProjectAction">
      <add-to-group group-id="BuildMenu" relative-to-action="BuildProject" anchor="before"/>
    </action>
    <action id="Konan.RebuildConfiguration" class="org.jetbrains.konan.gradle.execution.KonanRebuildConfigurationAction">
      <add-to-group group-id="BuildMenu" relative-to-action="Rebuild" anchor="before"/>
    </action>
    <action id="Konan.RebuildProject" class="org.jetbrains.konan.gradle.execution.KonanRebuildProjectAction">
      <add-to-group group-id="BuildMenu" relative-to-action="RebuildProject" anchor="before"/>
    </action>
    <action id="Konan.Clean" class="org.jetbrains.konan.gradle.execution.KonanCleanProjectAction">
      <add-to-group group-id="BuildMenu" relative-to-action="Clean" anchor="before"/>
    </action>
  </actions>

</idea-plugin>
