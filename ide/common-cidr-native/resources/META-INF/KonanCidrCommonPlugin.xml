<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude">
  <depends>com.intellij.modules.lang</depends>

  <xi:include href="/META-INF/KotlinPlugin.xml" xpointer="xpointer(/idea-plugin/*)">
    <xi:fallback/>
  </xi:include>

  <xi:include href="KonanCommonPlugin.xml"/>

  <extensionPoints>
    <extensionPoint qualifiedName="org.jetbrains.kotlin.native.gradleLauncherProvider"
                    interface="org.jetbrains.konan.gradle.execution.GradleKonanLauncherProvider"/>
  </extensionPoints>

  <application-components>
    <component>
      <implementation-class>org.jetbrains.konan.internal.KotlinNativeIdeInitializer</implementation-class>
    </component>
  </application-components>

  <project-components>
    <component>
      <implementation-class>org.jetbrains.konan.gradle.GradleKonanWorkspace</implementation-class>
    </component>
  </project-components>

  <extensions defaultExtensionNs="com.intellij">
    <applicationService
        serviceInterface="org.jetbrains.kotlin.platform.DefaultIdeTargetPlatformKindProvider"
        serviceImplementation="org.jetbrains.konan.support.NativeOnlyDefaultTargetPlatformKindProvider"/>
  </extensions>
</idea-plugin>
