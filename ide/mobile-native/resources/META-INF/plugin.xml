<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="/META-INF/KonanCommonPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>
  <!--suppress XmlPathReference -->
  <xi:include href="/META-INF/CocoaCommonPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>
  <xi:include href="/META-INF/SwiftLangPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>

  <id>org.jetbrains.kotlin.mobile.plugin</id>
  <name>Mobile for CLion</name>
  <!--version_placeholder-->
  <vendor>JetBrains</vendor>

  <!--idea_version_placeholder-->

  <change-notes/>

  <depends>com.intellij.modules.clion</depends>
  <!--java_plugin_dependency-->

  <application-components>
    <component>
      <interface-class>com.jetbrains.konan.KonanIconProvider</interface-class>
      <implementation-class>org.jetbrains.konan.GenericIconProvider</implementation-class>
    </component>

    <!-- swift -->
    <component>
      <interface-class>com.jetbrains.swift.codeinsight.resolve.module.SwiftModuleIOCache</interface-class>
      <implementation-class>com.jetbrains.swift.codeinsight.resolve.module.MobileSwiftModuleIOCache</implementation-class>
    </component>
    <component>
      <interface-class>com.jetbrains.swift.codeinsight.resolve.module.SwiftApinotesCache</interface-class>
      <implementation-class>com.jetbrains.swift.codeinsight.resolve.module.MobileSwiftApinotesCache</implementation-class>
    </component>
  </application-components>

  <extensions defaultExtensionNs="org.jetbrains.kotlin.native">
<!--    <gradleLauncherProvider implementation="org.jetbrains.konan.gradle.execution.CLionGradleKonanLauncherProvider"/>-->
  </extensions>
  <extensions defaultExtensionNs="com.intellij">
<!--    <directoryProjectGenerator implementation="org.jetbrains.konan.KonanGradleProjectGenerator"/>-->
    <projectTaskRunner implementation="org.jetbrains.konan.gradle.execution.GradleKonanProjectTaskRunner"/>

    <configurationType implementation="org.jetbrains.konan.execution.MobileAppRunConfigurationType"/>
    <configurationType implementation="org.jetbrains.konan.execution.testing.MobileTestRunConfigurationType"/>
    <runLineMarkerContributor language="ObjectiveC"
                              implementationClass="org.jetbrains.konan.gradle.execution.GradleKonanTargetRunLineMarkerProvider"/>

    <stepsBeforeRunProvider implementation="org.jetbrains.konan.gradle.execution.GradleKonanBuildBeforeRunTaskProvider"/>
    <programRunner implementation="org.jetbrains.konan.execution.MobileRunner" order="first"/>

    <applicationService serviceInterface="com.jetbrains.cidr.OCPathManagerCustomization"
                        serviceImplementation="org.jetbrains.konan.PathManagerCustomization" overrides="true"/>
    <applicationService serviceImplementation="org.jetbrains.konan.execution.DeviceService"/>
    <executionTargetProvider implementation="org.jetbrains.konan.execution.DeviceExecutionTargetProvider"/>

    <!-- apple gradle project model -->
    <externalProjectDataService implementation="com.jetbrains.cidr.apple.gradle.AppleProjectDataService"/>
    <projectService serviceImplementation="com.jetbrains.cidr.apple.gradle.GradleAppleWorkspace"/>

    <!-- swift -->
    <applicationService serviceInterface="com.jetbrains.swift.SwiftCompilerSettings"
                        serviceImplementation="com.jetbrains.swift.MobileSwiftCompilerSettings"/>
    <!--<applicationService serviceInterface="com.jetbrains.swift.codeinsight.highlighting.SwiftSourceKitAnnotator$Producer"
                        serviceImplementation="com.jetbrains.swift.swiftpm.codeinsight.highlighting.CLionSwiftSourceKitAnnotator$Producer"/>-->

    <applicationService serviceImplementation="com.jetbrains.swift.SwiftSettings"/>

    <projectService serviceInterface="com.jetbrains.swift.codeinsight.resolve.SwiftModuleManager"
                    serviceImplementation="com.jetbrains.swift.codeinsight.resolve.MobileSwiftModuleManager"/>

    <applicationService serviceInterface="com.jetbrains.swift.codeinsight.resolve.module.SwiftModuleReader"
                        serviceImplementation="com.jetbrains.swift.codeinsight.resolve.module.MobileSwiftModuleReader"/>

    <applicationService serviceInterface="com.jetbrains.swift.sourcekitd.SourceKitServiceManager"
                        serviceImplementation="com.jetbrains.swift.sourcekitd.MobileSourceKitServiceManager"/>

    <!--<externalAnnotator implementationClass="com.jetbrains.swift.swiftpm.codeinsight.highlighting.CLionSwiftSourceKitAnnotator"
                       language="Swift"/>-->
  </extensions>

  <extensions defaultExtensionNs="clion">
<!--    <buildConfigurationProvider id="CLionKonanBuildConfigurationProvider" implementation="org.jetbrains.konan.gradle.execution.CLionKonanBuildConfigurationProvider" />-->
  </extensions>

  <extensions defaultExtensionNs="org.jetbrains.plugins.gradle">
    <projectResolve implementation="com.jetbrains.cidr.apple.gradle.AppleProjectResolver"/>
  </extensions>

  <extensions defaultExtensionNs="cidr.lang">
    <moduleMapManagerRequestor implementation="com.jetbrains.cidr.apple.gradle.GradleAppleModuleMapManagerRequestor"/>
    <!-- swift -->
    <swiftSourceModuleProvider implementation="com.jetbrains.swift.codeinsight.resolve.MobileSwiftSourceModuleProvider"/>
  </extensions>
</idea-plugin>
